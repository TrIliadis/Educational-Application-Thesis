<link rel="stylesheet" href="/static/stylesheets/navbar.css" />
<link rel="stylesheet" href="/static/stylesheets/login.css" />

<nav class="navbar navbar-expand-lg navbar-dark dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">
      <img
        class="books"
        src="/static/logos/book.png"
        alt=""
        width="35"
        height="30"
        class="d-inline-block align-text-top"
      />
      Εκπαιδευτική Εφαρμογή
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarTogglerDemo01"
      aria-controls="navbarTogglerDemo01"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div
      class="collapse navbar-collapse nav nav-masthead justify-content-center float-md-end"
      id="navbarTogglerDemo01"
    >
      <ul class="navbar-nav mb-2 mb-lg-0 mx-1 d-flex ms-auto">
        <li class="nav-item">
          <a class="navLink" aria-current="page" href="/">Αρχική Σελίδα</a>
        </li>
        <li class="nav-item">
          <a class="navLink <%= (typeof topic !== "undefined" && (topic === "Ομάδες")) ? 'active' : ''%>" href="/">Ομάδες</a>
        </li>
        <li class="nav-item">
          <a class="navLink <%= (typeof topic !== "undefined" && (topic == "Επικοινωνία")) ? 'active' : ''%>" href="/contact">Επικοινωνία</a>
        </li>
        <% if(!loggedUser){ %> 
        <li class="nav-item">
          <!-- Modal trigger-->
          <a
            class="pointer navLink"
            data-bs-toggle="modal"
            data-bs-target="#loginModal"
            >Σύνδεση</a
          >

          <!-- Modal -->
          <div
            class="modal fade"
            id="loginModal"
            tabindex="-1"
            data-backdrop="false"
          >
            <div class="modal-dialog modal-dialog-centered">
              <div class="loginModal modal-content">
                <h2>Σύνδεση</h2>

                <div class="modal-body">
                  <form
                    id="loginForm"
                    method="POST"
                    action="/login"
                    class="needs-validation"
                    novalidate
                  >
                    <div class="userModal">
                      <input
                        class="form-control"
                        id="modalEmail"
                        type="text"
                        name="username"
                        required
                        autofocus
                      />
                      <label>Email</label>
                      <div class="invalid-feedback">
                        Το email δεν μπορεί να είναι κενό
                      </div>
                    </div>
                    <div class="userModal">
                      <input
                        class="form-control"
                        id="modalPassword"
                        type="password"
                        name="password"
                        required
                      />
                      <label>Κωδικός</label>
                    </div>
                    <button class="btnGlow">Σύνδεση</button>
                  </form>
                </div>
              </div>
              
              <li class="nav-item">
                <a class="navLink <%= (typeof topic !== "undefined" && (topic === "Εγγραφή")) ? 'active' : ''%>" href="/register">Εγγραφή</a>
              </li>
              <% } %> 
              <% if(loggedUser){ %> 
              <li class="nav-item">
                <a class="navLink <%= (typeof topic !== "undefined" && (topic === "Επεξεργασία Προφίλ")) ? 'active' : ''%>" href="/edit">Επεξεργασία Προφίλ</a>
              </li>
              <li class="nav-item">
                <a class="navLink" href="/logout">Έξοδος</a>
              </li>
              <% } %> 
            </div>
          </div>
          <% if(!loggedUser){ %> 
          <script>
            const loginModal = document.getElementById("loginModal");
            const emailInput = document.getElementById("modalEmail");

            loginModal.addEventListener("shown.bs.modal", function () {
              emailInput.focus();
              emailInput.classList.add("login");
            });
          </script>
          <% } %>
        </li>
      </ul>
    </div>
  </div>
</nav>
